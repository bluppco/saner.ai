---

// IMPORT COLLECTIONS FROM ASTRO
import { getCollection } from "astro:content";

let testimonial_data = await getCollection("testimonials");
testimonial_data = testimonial_data.sort( ( a, b ) => a.data.order - b.data.order )

//console.log(testimonial_data);

// IMPORT ASTRO ATOMS
import HeadingTwo from "@/atoms/akash/heading/two/index.astro"
import HeadingThree from "@/atoms/akash/heading/three/index.astro"
import Star from "@/atoms/akash/star/index.astro"
import ProfilePhoto from "@/atoms/akash/profile/photo/index.astro"
import Links from "@/atoms/links/index.astro"
import ProfileName from "@/atoms/akash/profile/name/index.astro"
import ProfileJob from "@/atoms/akash/profile/job/index.astro"
import Picture from "@/atoms/picture/internal/contain/index.astro"

---
<div class="w-full flex justify-center items-center my-10" >
    <div class="w-[80%] flex flex-col justify-center items-center">
        <HeadingTwo>Loved By</HeadingTwo>
        <HeadingThree>Entrepreneurs, ADHDr, Learners & Creators</HeadingThree>
        <div class=" border-[1px] border-black border-opacity-20 flex flex-wrap gap-5 p-5 justify-start mt-10 items-baseline">

            { 

                testimonial_data.map(( item, index ) => (
                    <div class=" border-[1px] border-black border-opacity-20 flex flex-col gap-8 p-5 w-1/2 md:w-1/3 lg:w-1/4  flex-grow flex-shrink">
                        <div>
                            <Links href={ item.data.reviewLink } aria_label={ item.data.title }>
                                <Star />
                            </Links>
                        </div>
                        <Links href={ item.data.reviewLink } aria_label={ item.data.title }>
                            <div>
                                <p>"<span>{ item.data.review }</span>"</p>
                            </div>
                        </Links>
                        <Links href={ item.data.profileLink } aria_label={ item.data.title }>
                            <div class="flex justify-start items-center gap-4" >
                                <ProfilePhoto source = { item.data.profilePhoto } alternative_text = { item.data.title }/>
                                <div class=" flex flex-col gap-1">
                                    <ProfileName>{ item.data.title }</ProfileName>
                                    <ProfileJob>{ item.data.job }</ProfileJob>
                                </div>
                            </div>
                        </Links>
                        <Links href={ item.data.reviewLink } aria_label={ item.data.title }>
                             <div class=" flex justify-between items-center border-t-[1px] border-gray-300 pt-4">
                                <p class=" text-gray-400" >Review of Saner.AI</p>
                                <div class=" w-6 aspect-square rounded-full">
                                    <Picture source = "/icons/p.png"/>
                                </div>
                            </div>
                        </Links>
                    </div>
                ))

            }

        </div>
    </div>
</div>
